enum type { reg,reg16,number,pointer,preg,incp,decp,none,bad,instruction };
enum regs {regA,regB,regC,regD,regF,regH,regL,regCB,regDA,regHL,regSP,regX,regY,regVAL };
#define NUM_REG 13
#define NUM_16_REG 6
struct registers {
 	char *name; 
 	int size; 
 	int code; 
 	int type;
 } ;
 struct registers r[NUM_REG+1] = { 
	"A",8,regA,reg,
	"B",8,regB,reg,
	"C",8,regC,reg,
	"D",8,regD,reg,
	"F",8,regF,reg,
	"H",8,regH,reg,
	"L",8,regL,reg,
	"CB",16,regCB,reg16,
	"DA",16,regDA,preg,
	"HL",16,regHL,reg16,
	"SP",16,regSP,reg16,
	"X",16,regX,incp,
	"Y",16,regY,incp,
	 "VAL",-1,regVAL,number };
#define NUMBEROPS  37 
#define NUMBERINST  220 
enum instr {HLT,NOP,POP,MOV,PUSHALL,POPALL,DEC,INC,ADC,ADD,ST,AND,SLL,SLR,OR,LD,SUB,CMP,PUSH,CALL,JMP,JNEQ,JPZ,JNZ,JLT,JGT,JEQ,JPC,JNEG,JPOS,RETI,RET,XOR,NOT,SET,CLR,SBC,inst_end };
char *a_inst[NUMBEROPS+1] = {"HLT","NOP","POP","MOV","PUSHALL","POPALL","DEC","INC","ADC","ADD","ST","AND","SLL","SLR","OR","LD","SUB","CMP","PUSH","CALL","JMP","JNEQ","JPZ","JNZ","JLT","JGT","JEQ","JPC","JNEG","JPOS","RETI","RET","XOR","NOT","SET","CLR","SBC","inst_end" };
struct op_code {
	 int inst; 
	 int size;
	 int opcode;
	int src;
	 int src_t;
	 int dest;
	 int dest_t;
	 int operands; 
		 };
struct op_code op_codes[NUMBERINST+1] = {
	HLT,0,0,none,none,none,none,0,
	NOP,0,1,none,none,none,none,0,
	POP,0,2,regH,reg,none,none,1,
	POP,0,3,regL,reg,none,none,1,
	POP,0,119,regF,reg,none,none,1,
	POP,0,120,regA,reg,none,none,1,
	POP,0,121,regB,reg,none,none,1,
	POP,0,122,regC,reg,none,none,1,
	POP,0,123,regY,reg,none,none,1,
	POP,0,124,regX,reg,none,none,1,
	POP,0,125,regD,reg,none,none,1,
	POP,0,189,regHL,reg,none,none,1,
	MOV,0,4,regA,reg,regL,reg,2,
	MOV,0,5,regA,reg,regH,reg,2,
	MOV,0,6,regL,reg,regA,reg,2,
	MOV,0,7,regH,reg,regA,reg,2,
	MOV,0,8,regB,reg,regH,reg,2,
	MOV,0,9,regB,reg,regL,reg,2,
	MOV,0,10,regH,reg,regB,reg,2,
	MOV,0,11,regL,reg,regB,reg,2,
	MOV,0,12,regHL,reg,regDA,reg,2,
	MOV,0,13,regHL,reg,regCB,reg,2,
	MOV,0,80,regA,reg,regB,reg,2,
	MOV,0,81,regA,reg,regC,reg,2,
	MOV,0,82,regA,reg,regD,reg,2,
	MOV,0,83,regB,reg,regA,reg,2,
	MOV,0,84,regB,reg,regC,reg,2,
	MOV,0,85,regB,reg,regD,reg,2,
	MOV,0,86,regC,reg,regA,reg,2,
	MOV,0,87,regC,reg,regB,reg,2,
	MOV,0,88,regC,reg,regD,reg,2,
	MOV,0,89,regD,reg,regA,reg,2,
	MOV,0,90,regD,reg,regB,reg,2,
	MOV,0,91,regD,reg,regC,reg,2,
	MOV,0,92,regSP,reg,regX,reg,2,
	MOV,0,93,regSP,reg,regY,reg,2,
	MOV,0,94,regSP,reg,regCB,reg,2,
	MOV,0,95,regSP,reg,regHL,reg,2,
	MOV,0,177,regCB,reg,regHL,reg,2,
	MOV,0,178,regCB,reg,regDA,reg,2,
	MOV,0,179,regDA,reg,regCB,reg,2,
	MOV,0,180,regDA,reg,regSP,reg,2,
	MOV,0,181,regDA,reg,regX,reg,2,
	MOV,0,182,regDA,reg,regY,reg,2,
	MOV,0,186,regX,reg,regDA,reg,2,
	MOV,0,187,regY,reg,regDA,reg,2,
	MOV,0,190,regSP,reg,regDA,reg,2,
	MOV,0,192,regDA,reg,regHL,reg,2,
	PUSHALL,0,14,none,none,none,none,0,
	POPALL,0,15,none,none,none,none,0,
	DEC,0,16,regA,reg,none,none,1,
	DEC,0,17,regD,reg,none,none,1,
	DEC,0,20,regX,reg,none,none,1,
	DEC,0,21,regY,reg,none,none,1,
	INC,0,18,regA,reg,none,none,1,
	INC,0,19,regD,reg,none,none,1,
	INC,0,22,regX,reg,none,none,1,
	INC,0,23,regY,reg,none,none,1,
	ADC,16,24,regDA,reg,regVAL,number,2,
	ADC,0,25,regDA,reg,regCB,reg,2,
	ADC,0,28,regA,reg,regL,reg,2,
	ADC,0,29,regA,reg,regH,reg,2,
	ADC,0,30,regD,reg,regC,reg,2,
	ADC,8,77,regA,reg,regVAL,number,2,
	ADC,8,78,regD,reg,regVAL,number,2,
	ADC,0,79,regA,reg,regB,reg,2,
	ADC,0,225,regDA,reg,regX,incp,2,
	ADD,0,26,regA,reg,regL,reg,2,
	ADD,0,27,regA,reg,regH,reg,2,
	ADD,16,64,regDA,reg,regVAL,number,2,
	ADD,8,65,regA,reg,regVAL,number,2,
	ADD,8,66,regD,reg,regVAL,number,2,
	ADD,0,67,regA,reg,regB,reg,2,
	ADD,0,68,regD,reg,regC,reg,2,
	ADD,0,69,regDA,reg,regCB,reg,2,
	ADD,0,224,regDA,reg,regX,incp,2,
	ST,0,31,regL,reg,regX,preg,2,
	ST,0,96,regA,reg,regX,preg,2,
	ST,0,97,regA,reg,regY,preg,2,
	ST,0,98,regB,reg,regX,preg,2,
	ST,0,99,regB,reg,regY,preg,2,
	ST,0,100,regC,reg,regY,preg,2,
	ST,0,101,regC,reg,regX,preg,2,
	ST,0,102,regD,reg,regY,preg,2,
	ST,0,103,regD,reg,regX,preg,2,
	ST,0,110,regA,reg,regX,incp,2,
	ST,0,111,regA,reg,regY,incp,2,
	ST,0,183,regH,reg,regX,preg,2,
	ST,0,184,regH,reg,regY,preg,2,
	ST,0,185,regL,reg,regY,preg,2,
	ST,0,200,regHL,reg,regY,incp,2,
	ST,0,201,regHL,reg,regX,incp,2,
	ST,0,202,regCB,reg,regY,incp,2,
	ST,0,203,regCB,reg,regX,incp,2,
	ST,0,205,regDA,reg,regX,incp,2,
	ST,0,206,regDA,reg,regY,incp,2,
	ST,0,215,regD,reg,regY,incp,2,
	ST,0,216,regD,reg,regX,incp,2,
	AND,8,32,regA,reg,regVAL,number,2,
	AND,8,33,regD,reg,regVAL,number,2,
	AND,0,34,regA,reg,regB,reg,2,
	AND,0,35,regD,reg,regC,reg,2,
	AND,0,36,regA,reg,regH,reg,2,
	AND,0,37,regA,reg,regL,reg,2,
	AND,0,38,regDA,reg,regCB,reg,2,
	AND,16,44,regDA,reg,regVAL,number,2,
	AND,0,228,regDA,reg,regX,incp,2,
	SLL,0,39,regA,reg,none,none,1,
	SLL,0,41,regD,reg,none,none,1,
	SLR,0,40,regA,reg,none,none,1,
	SLR,0,42,regD,reg,none,none,1,
	OR,0,43,regDA,reg,regCB,reg,2,
	OR,16,45,regDA,reg,regVAL,number,2,
	OR,0,46,regA,reg,regH,reg,2,
	OR,0,47,regA,reg,regL,reg,2,
	OR,8,149,regA,reg,regVAL,number,2,
	OR,0,150,regA,reg,regB,reg,2,
	OR,8,158,regD,reg,regVAL,number,2,
	OR,0,159,regD,reg,regC,reg,2,
	OR,0,229,regDA,reg,regX,incp,2,
	LD,8,48,regA,reg,regVAL,number,2,
	LD,8,49,regB,reg,regVAL,number,2,
	LD,8,50,regC,reg,regVAL,number,2,
	LD,8,51,regD,reg,regVAL,number,2,
	LD,0,52,regC,reg,regX,preg,2,
	LD,0,53,regD,reg,regX,preg,2,
	LD,0,54,regL,reg,regX,preg,2,
	LD,16,55,regSP,reg,regVAL,number,2,
	LD,16,56,regX,reg,regVAL,number,2,
	LD,16,57,regY,reg,regVAL,number,2,
	LD,0,58,regX,reg,regX,preg,2,
	LD,0,59,regY,reg,regX,preg,2,
	LD,0,60,regX,reg,regY,preg,2,
	LD,0,61,regY,reg,regY,preg,2,
	LD,8,62,regH,reg,regVAL,number,2,
	LD,8,63,regL,reg,regVAL,number,2,
	LD,0,104,regDA,reg,regY,incp,2,
	LD,0,105,regDA,reg,regX,incp,2,
	LD,0,106,regB,reg,regX,preg,2,
	LD,0,107,regA,reg,regX,preg,2,
	LD,0,108,regA,reg,regX,incp,2,
	LD,0,109,regA,reg,regY,incp,2,
	LD,0,176,regH,reg,regX,reg,2,
	LD,16,193,regHL,reg,regVAL,number,2,
	LD,16,194,regDA,reg,regVAL,number,2,
	LD,16,195,regCB,reg,regVAL,number,2,
	LD,0,196,regHL,reg,regY,incp,2,
	LD,0,197,regHL,reg,regX,incp,2,
	LD,0,198,regCB,reg,regY,incp,2,
	LD,0,199,regCB,reg,regX,incp,2,
	LD,0,208,regB,reg,regX,incp,2,
	LD,0,209,regB,reg,regY,incp,2,
	LD,0,210,regC,reg,regY,preg,2,
	LD,0,211,regD,reg,regY,preg,2,
	LD,0,212,regL,reg,regY,preg,2,
	LD,0,213,regH,reg,regY,preg,2,
	LD,0,214,regB,reg,regY,preg,2,
	SUB,8,70,regA,reg,regVAL,number,2,
	SUB,8,71,regD,reg,regVAL,number,2,
	SUB,0,72,regA,reg,regB,reg,2,
	SUB,0,73,regD,reg,regC,reg,2,
	SUB,0,169,regA,reg,regH,reg,2,
	SUB,0,170,regA,reg,regL,reg,2,
	SUB,16,171,regDA,reg,regVAL,number,2,
	SUB,16,173,regDA,reg,regCB,reg,2,
	SUB,0,226,regDA,reg,regX,incp,2,
	CMP,8,74,regA,reg,regVAL,number,2,
	CMP,0,75,regA,reg,regB,reg,2,
	CMP,0,76,regD,reg,regC,reg,2,
	CMP,8,175,regD,reg,regVAL,number,2,
	PUSH,0,112,regA,reg,none,none,1,
	PUSH,0,113,regB,reg,none,none,1,
	PUSH,0,114,regC,reg,none,none,1,
	PUSH,0,115,regD,reg,none,none,1,
	PUSH,0,116,regF,reg,none,none,1,
	PUSH,0,117,regX,reg,none,none,1,
	PUSH,0,118,regY,reg,none,none,1,
	PUSH,0,126,regH,reg,none,none,1,
	PUSH,0,127,regL,reg,none,none,1,
	PUSH,0,188,regHL,reg,none,none,1,
	CALL,16,128,regVAL,number,none,none,1,
	CALL,0,140,regDA,preg,none,none,1,
	JMP,16,129,regVAL,number,none,none,1,
	JMP,0,132,regDA,preg,none,none,1,
	JNEQ,16,130,regVAL,number,none,none,1,
	JPZ,16,131,regVAL,number,none,none,1,
	JNZ,16,133,regVAL,number,none,none,1,
	JLT,16,134,regVAL,number,none,none,1,
	JGT,16,135,regVAL,number,none,none,1,
	JEQ,16,136,regVAL,number,none,none,1,
	JPC,16,137,regVAL,number,none,none,1,
	JNEG,16,138,regVAL,number,none,none,1,
	JPOS,16,139,regVAL,number,none,none,1,
	RETI,0,142,none,none,none,none,0,
	RET,0,143,none,none,none,none,0,
	XOR,0,144,regDA,reg,regCB,reg,2,
	XOR,0,146,regA,reg,regL,reg,2,
	XOR,0,147,regA,reg,regB,reg,2,
	XOR,8,148,regA,reg,regVAL,number,2,
	XOR,0,160,regA,reg,regH,reg,2,
	XOR,16,161,regDA,reg,regVAL,number,2,
	XOR,0,162,regDA,reg,regX,incp,2,
	XOR,0,204,regD,reg,regC,reg,2,
	NOT,0,145,regDA,reg,none,none,1,
	NOT,0,151,regA,reg,none,none,1,
	SET,0,152,regA,reg,none,none,1,
	SET,0,154,regD,reg,none,none,1,
	SET,0,156,regDA,reg,none,none,1,
	CLR,0,153,regA,reg,none,none,1,
	CLR,0,155,regD,reg,none,none,1,
	CLR,0,157,regDA,reg,none,none,1,
	SBC,8,163,regA,reg,regVAL,number,2,
	SBC,8,164,regD,reg,regVAL,number,2,
	SBC,0,165,regA,reg,regB,reg,2,
	SBC,0,166,regD,reg,regC,reg,2,
	SBC,0,167,regA,reg,regH,reg,2,
	SBC,0,168,regA,reg,regL,reg,2,
	SBC,16,172,regDA,reg,regVAL,number,2,
	SBC,0,174,regDA,reg,regCB,reg,2,
	SBC,0,227,regDA,reg,regX,incp,2,
	inst_end,0,0,0,0,0,0,0 };
